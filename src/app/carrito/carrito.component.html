<div class="carrito-sidebar">
  <h5 class="mb-3">Tu Pedido</h5>
  
  <div class="carrito-items">
    @for(item of carritoItms; track item.pizza.id) {
    <div class="carrito-item">
      <div class="item-header">
        <span class="item-nombre">{{ item.pizza.nombre }}</span>
        <span class="item-precio">{{ item.pizza.precio | currency:'USD':'symbol':'1.2-2' }}</span>
      </div>
      
      <div class="item-cantidad">
        <button class="btn btn-sm btn-outline-secondary" (click)="restarCantidad(item)">-</button>
        <span class="cantidad">
          <input
           type="text"
           [value]="item.cantidad"
           (input)="validarCantidad($event, item)"
           (keydown)="soloNumeros($event)"
           (blur)="validarLimites(item)">
        </span>
        <button class="btn btn-sm btn-outline-secondary" (click)="sumarCantidad(item)">+</button>
        <button class="btn btn-sm btn-outline-danger ms-2" (click)="removeItem($index)" title="Eliminar">
          <i class="bi bi-trash"></i>
        </button>
      </div>
      
      <div class="item-subtotal text-end">
        Subtotal: {{ getSubtotal(item) | currency:'USD':'symbol':'1.2-2' }}
      </div>
    </div>
    } @empty {
    <div class="text-center py-3">
      No hay productos en el carrito
    </div>
    }
  </div>
  
  <div class="carrito-total" *ngIf="carritoItms.length > 0">
    <hr>
    <div class="d-flex justify-content-between align-items-center">
      <strong>Total:</strong>
      <span class="fw-bold">{{ getTotal() | currency:'USD':'symbol':'1.2-2' }}</span>
    </div>
    <div class="mt-3">
      <button class="btn btn-primary w-100" [disabled]="carritoItms.length === 0">
        <i class="bi bi-credit-card me-2"></i>Pagar
      </button>
    </div>
  </div>
</div>
